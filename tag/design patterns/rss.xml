<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>Dave&#39;s Notebook • Posts by &#34;design patterns&#34; tag</title>
        <link>http://davembush.github.com</link>
        <description></description>
        <language>English</language>
        <pubDate>Tue, 05 Dec 2017 06:30:32 -0500</pubDate>
        <lastBuildDate>Tue, 05 Dec 2017 06:30:32 -0500</lastBuildDate>
        <category>project management</category>
        <category>code coverage</category>
        <category>tdd</category>
        <category>unit test</category>
        <category>code</category>
        <category>programming</category>
        <category>angular</category>
        <category>javascript</category>
        <category>performance</category>
        <category>react.js</category>
        <category>agile</category>
        <category>failure</category>
        <category>kanban</category>
        <category>scrum</category>
        <category>interview</category>
        <category>job search</category>
        <category>test driven development</category>
        <category>mvvm</category>
        <category>DRY</category>
        <category>loose coupling</category>
        <category>single responsibility</category>
        <category>c#</category>
        <category>learning</category>
        <category>bug</category>
        <category>ext js</category>
        <category>sencha</category>
        <category>career</category>
        <category>react</category>
        <category>ngrx</category>
        <category>redux</category>
        <category>functional</category>
        <category>reactive</category>
        <category>mvp</category>
        <category>private</category>
        <category>testing</category>
        <category>typescript</category>
        <category>routing</category>
        <category>pointers</category>
        <category>unsafe</category>
        <category>class diagram</category>
        <category>vb.net</category>
        <category>visual studio</category>
        <category>flux</category>
        <category>lazy loading</category>
        <category>scope</category>
        <category>DOM</category>
        <category>ionic</category>
        <category>putty</category>
        <category>ssh</category>
        <category>formgroup</category>
        <category>validation</category>
        <category>angular-cli</category>
        <category>modules</category>
        <category>ngmodule</category>
        <category>observables</category>
        <category>RxJS</category>
        <category>model driven</category>
        <category>reactive forms</category>
        <category>estimating</category>
        <category>story points</category>
        <category>best practices</category>
        <category>design patterns</category>
        <category>architecture</category>
        <category>asp.net</category>
        <category>memory</category>
        <category>angular.js</category>
        <category>iis</category>
        <category>ajax</category>
        <category>json</category>
        <category>controller</category>
        <category>MVC</category>
        <category>view</category>
        <category>404</category>
        <category>application_error</category>
        <category>exceptions</category>
        <category>viewstate</category>
        <category>archietcture</category>
        <category>bll</category>
        <category>dal</category>
        <category>Three Tiered</category>
        <category>.net</category>
        <category>enums</category>
        <category>tutorial</category>
        <category>code quality</category>
        <category>cyclomatic</category>
        <category>halstead</category>
        <category>child component</category>
        <category>CefSharp</category>
        <category>Chromium</category>
        <category>Vista</category>
        <category>VPN</category>
        <category>xp</category>
        <category>get</category>
        <category>properties</category>
        <category>set</category>
        <category>empty</category>
        <category>string</category>
        <category>habits</category>
        <category>application testing</category>
        <category>dependency injection</category>
        <category>debugging</category>
        <category>cms</category>
        <category>dotnetnuke</category>
        <category>WordPress</category>
        <category>authority</category>
        <category>confidence</category>
        <category>datalist</category>
        <category>listview</category>
        <category>comments</category>
        <category>tdd. agile</category>
        <category>bootstrap</category>
        <category>copy &amp;amp; paste</category>
        <category>cross browser</category>
        <category>idisposable</category>
        <category>animation</category>
        <category>css</category>
        <category>html</category>
        <category>debug</category>
        <category>checked</category>
        <category>double</category>
        <category>float</category>
        <category>int</category>
        <category>long</category>
        <category>short</category>
        <category>unchecked</category>
        <category>currency</category>
        <category>decimal</category>
        <category>floating point math</category>
        <category>single</category>
        <category>authentication</category>
        <category>isinrole</category>
        <category>roles</category>
        <category>user</category>
        <category>definition of done</category>
        <category>DoD</category>
        <category>dispose</category>
        <category>finalize</category>
        <category>suppressfinalize</category>
        <category>education</category>
        <category>client side</category>
        <category>development</category>
        <category>class</category>
        <category>dynamic classing</category>
        <category>gridview</category>
        <category>college</category>
        <category>freshman</category>
        <category>babel</category>
        <category>es2015</category>
        <category>es6</category>
        <category>jest</category>
        <category>bdd</category>
        <category>Single Responsibility</category>
        <category>Architecture</category>
        <category>full stack developer</category>
        <category>web development</category>
        <category>formsauthentication</category>
        <category>manual</category>
        <category>redirectfromloginpage</category>
        <category>setauthcookie</category>
        <category>NgRX</category>
        <category>luck</category>
        <category>social skills</category>
        <category>brain</category>
        <category>health</category>
        <category>programmer</category>
        <category>productivity</category>
        <category>QA</category>
        <category>extreme programming</category>
        <category>software</category>
        <category>httpcontext</category>
        <category>items</category>
        <category>session</category>
        <category>naming conventions</category>
        <category>variables</category>
        <category>self improvement</category>
        <category>301</category>
        <category>302</category>
        <category>fiddler</category>
        <category>infinite loop</category>
        <category>images</category>
        <category>iTextSharp</category>
        <category>PDF</category>
        <category>concatenation</category>
        <category>quirks</category>
        <category>parsing</category>
        <category>xhtml</category>
        <category>fonts</category>
        <category>stack</category>
        <category>htmltidy</category>
        <category>tables</category>
        <category>acrofields</category>
        <category>form fields</category>
        <category>outputstream</category>
        <category>pdfreader</category>
        <category>pdfstamper</category>
        <category>bind</category>
        <category>callbacks</category>
        <category>currying</category>
        <category>events</category>
        <category>business rules</category>
        <category>boolean</category>
        <category>fields</category>
        <category>methods</category>
        <category>object</category>
        <category>functions</category>
        <category>inheritance</category>
        <category>prototype</category>
        <category>hoist</category>
        <category>falsy</category>
        <category>truthy</category>
        <category>istanbul</category>
        <category>jasmine</category>
        <category>hoisting</category>
        <category>types</category>
        <category>type conversion</category>
        <category>dialog</category>
        <category>jQuery</category>
        <category>validation controls</category>
        <category>async</category>
        <category>each</category>
        <category>collapse</category>
        <category>expand</category>
        <category>load</category>
        <category>partial content</category>
        <category>tooltip</category>
        <category>regions</category>
        <category>limiting beliefs</category>
        <category>angular material</category>
        <category>linkedin</category>
        <category>social media</category>
        <category>tips</category>
        <category>CI. Continuous Integration</category>
        <category>magic numbers</category>
        <category>magic strings</category>
        <category>flex</category>
        <category>multiview</category>
        <category>wizard</category>
        <category>threading</category>
        <category>intern</category>
        <category>express</category>
        <category>node</category>
        <category>nunit</category>
        <category>object initializers</category>
        <category>video</category>
        <category>reflection</category>
        <category>unity</category>
        <category>best practice</category>
        <category>asp.net postback button</category>
        <category>iText</category>
        <category>property based testing</category>
        <category>cli</category>
        <category>software architecture</category>
        <category>rxjs. angular 2</category>
        <category>redirect</category>
        <category>response</category>
        <category>responsive design</category>
        <category>parallel</category>
        <category>selenium</category>
        <category>Marble Testing</category>
        <category>java</category>
        <category>grid</category>
        <category>hub</category>
        <category>serialization</category>
        <category>specflow</category>
        <category>like</category>
        <category>sql</category>
        <category>tsql</category>
        <category>where clause</category>
        <category>do while</category>
        <category>for next</category>
        <category>ms-sql</category>
        <category>while</category>
        <category>gamification</category>
        <category>paired programming</category>
        <category>reference types</category>
        <category>stringbuilder</category>
        <category>value types</category>
        <category>technical debt</category>
        <category>activetabindex</category>
        <category>postback</category>
        <category>tab control</category>
        <category>tabcontrol</category>
        <category>kata</category>
        <category>extjs</category>
        <category>email</category>
        <category>mailaddress</category>
        <category>mailmessage</category>
        <category>smtpclient</category>
        <category>Quality</category>
        <category>behavior</category>
        <category>psychology</category>
        <category>portal</category>
        <category>web 1.0</category>
        <category>web 2.0</category>
        <category>trace</category>
        <category>compiler</category>
        <category>errror</category>
        <category>warning</category>
        <category>connection string</category>
        <category>dataset</category>
        <category>error</category>
        <category>web.config</category>
        <category>tslint</category>
        <category>emotions</category>
        <category>hiring</category>
        <category>aspnet_regsql</category>
        <category>forms based authentication</category>
        <category>jsdom</category>
        <category>karma</category>
        <category>noTDD</category>
        <category>bundling</category>
        <category>gulp</category>
        <category>minification</category>
        <category>node.js</category>
        <category>file upload</category>
        <category>objects</category>
        <category>hide</category>
        <category>vb.net attributes</category>
        <category>nothing</category>
        <category>nullable</category>
        <category>conditional startup</category>
        <category>windows forms</category>
        <category>winforms</category>
        <category>char</category>
        <category>split</category>
        <category>strict</category>
        <category>clarity</category>
        <category>ui</category>
        <category>ux</category>
        <category>asmx</category>
        <category>error handling</category>
        <category>webservice</category>
        <category>binary</category>
        <category>bitwise</category>
        <category>operators</category>
        <category>automation</category>
        <category>browser</category>
        <category>mstest</category>
        <category>immutable</category>
        <category>global</category>
        <category>await</category>
        <category>webapi</category>
        <category>configuration</category>
        <category>devops</category>
        <category>testcasedata</category>
        <category>testcasesource</category>
        <category>closure</category>
        <category>loops</category>
        <category>certification</category>
        <category>mcsd</category>
        <category>microsoft</category>
        <category>inversion of control</category>
        <category>ioc</category>
        <category>casting</category>
        <category>convert</category>
        <category>arguements</category>
        <category>command line</category>
        <category>main</category>
        <category>yagni</category>
        <category>npm</category>
        <category>nvm</category>
        <category>resumes</category>
        <category>change-detection</category>
        <category>state-management</category>
        <category>web-workers</category>
        <category>libraries</category>
        <category>strong typing</category>
        <category>linting</category>
        <category>constructors</category>
        <category>clean code</category>
        <category>smart-ngrx</category>
        <category>ngrx-store</category>
        <category>ngrx-entity</category>
        <category>ngrx-effects</category>
        <item>
            <guid isPermalink="true">http://davembush.github.com/humpty-dumpty-and-programming/</guid>
            <title>Humpty Dumpty and Programming</title>
            <link>http://davembush.github.com/humpty-dumpty-and-programming/</link>
            <category>programming</category>
            <category>agile</category>
            <category>design patterns</category>
            <pubDate>Tue, 05 Dec 2017 06:30:32 -0500</pubDate>
            <description><![CDATA[ &lt;p&gt;I’ve noticed a pattern in the programming world at large both with programmers and with managers.  We define things how we want them to be for our organization and not how they are.  We are like Humpty Dumpty who says, “When I use a word … it means just what I choose it to mean – neither more nor less.” &lt;/p&gt;
&lt;p&gt;There are two places where I see this pattern manifesting.  The Agile movement and Design Patterns. &lt;figure&gt;&lt;img src=&#34;/uploads/2017/12/2017-12-05.png&#34; title=&#34;Humpty Dumpty and Programming&#34;&gt; Photo by &lt;a href=&#34;//visualhunt.com/author/f31767&#34;&gt;aturkus&lt;/a&gt; on &lt;a href=&#34;//visualhunt.com/re/b4881b&#34;&gt;Visualhunt&lt;/a&gt; &amp;#x2F; &lt;a href=&#34;//creativecommons.org/licenses/by/2.0/&#34;&gt; CC BY&lt;/a&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;span id=&#34;more&#34;&gt;&lt;/span&gt; 

&lt;h2 id=&#34;Agile&#34;&gt;&lt;a href=&#34;#Agile&#34; class=&#34;headerlink&#34; title=&#34;Agile&#34;&gt;&lt;/a&gt;Agile&lt;/h2&gt;&lt;p&gt;Longtime readers are familiar with my rants against the failure of Agile.  Ever job interview I go to eventually ends up asking the same question. &lt;/p&gt;
&lt;p&gt;“Have you ever worked in an Agile organization before?” &lt;/p&gt;
&lt;p&gt;I have a lot of issues with this question, but my answer is always the same.  “I’ve worked in several organizations that call themselves Agile, but I’ve yet to work in one that really is.”  And there is the problem.  Even if I say I’ve worked in an Agile organization, there is no possible way you can be sure I’ve worked in an Agile organization that defines Agile the way you describe Agile.  So, why even ask the question? &lt;/p&gt;
&lt;p&gt;It is like Humpty Dumpty trying to explain the meaning of the poem &lt;a href=&#34;//www.jabberwocky.com/carroll/jabber/jabberwocky.html&#34;&gt;Jabberwocky&lt;/a&gt;. We define Agile with the bits we like and ignore the bits we don’t like or don’t understand, like the 4 blind men “looking” at an elephant and then wonder why it doesn’t really work for our organization. &lt;/p&gt;
&lt;p&gt;Next time someone ask me that question, I may just answer the question with another question, “Why do you ask?” or “How do you define ‘Agile’?” &lt;/p&gt;
&lt;p&gt;Seriously! What’s the point of asking the question when it doesn’t tell you anything about the applicant you are interviewing?  Agile has become such a major buzzword that I doubt you’ll find any applicants that haven’t worked in an organization that calls itself “Agile.”&lt;/p&gt;
&lt;h2 id=&#34;Design-Patterns&#34;&gt;&lt;a href=&#34;#Design-Patterns&#34; class=&#34;headerlink&#34; title=&#34;Design Patterns&#34;&gt;&lt;/a&gt;Design Patterns&lt;/h2&gt;&lt;p&gt;The more popular the design pattern, the more likely we are to see the exact same issues in our programming.  Currently, we can most clearly see this in the MV* design pattern.  Here again, people are using the design pattern based on what they imagine it to be. &lt;/p&gt;
&lt;p&gt;In an article I wrote several months ago, someone recently commented about MVVM, “Isn’t that the way MVVM works? views don’t have business login, only pure “view” logic, the ViewModel is the one having business logic.” &lt;/p&gt;
&lt;p&gt;This is a common misconception.  That the ViewModel, or the Controller, or the Presenter (MVP) are where our business logic go.  This completely ignores the fact that MV* is a View layer design pattern.  The View part of the MV* is the part within the larger View layer that is responsible for rendering state.&lt;/p&gt;
&lt;h2 id=&#34;A-Community-of-Hacks&#34;&gt;&lt;a href=&#34;#A-Community-of-Hacks&#34; class=&#34;headerlink&#34; title=&#34;A Community of Hacks?&#34;&gt;&lt;/a&gt;A Community of Hacks?&lt;/h2&gt;&lt;p&gt;Are we just a community of hacks?  I think maybe we are. All we care about is that we’ve shipped some code. We, largely, don’t care about our craft.  If we were artist, we starve.  Not because artist starve (which is a myth by the way) but because the code we produce is so crappy, no one would consider it valuable. &lt;/p&gt;
&lt;p&gt;If we built houses, we’d never get past the building inspectors.  If we were architects, the houses would never get built because the plans are too confusing. &lt;/p&gt;
&lt;p&gt;The blessing and the curse of programming is that we can change things quickly.  Because we can change things quickly, this has us believing there is no need to be careful. &lt;/p&gt;
&lt;p&gt;Each year we need more and more programmers to work on code because the codebase becomes crappier each year.  No one cares.  In the 30 years I’ve been programming, I’ve only had my code reviewed as a practice in two organizations.  That alone should tell you something about the state of our code.  And for all the claims about being Agile, none have used any best practices that grew out of Extreme Programming!&lt;/p&gt;
&lt;h2 id=&#34;What-If&#34;&gt;&lt;a href=&#34;#What-If&#34; class=&#34;headerlink&#34; title=&#34;What If?&#34;&gt;&lt;/a&gt;What If?&lt;/h2&gt;&lt;p&gt;In previous post I’ve explored both sides of the technical interview process.  Up until recently, the technical interviews focused on the language, the framework, the tools.  And we try to develop an interview process that assures us that the applicant can actually use those tools.  Then when we hire them, and they can’t actually code. We wonder why? &lt;/p&gt;
&lt;p&gt;What if we got beyond tools to how people think?&lt;/p&gt;
&lt;h2 id=&#34;Code-Puzzles&#34;&gt;&lt;a href=&#34;#Code-Puzzles&#34; class=&#34;headerlink&#34; title=&#34;Code Puzzles&#34;&gt;&lt;/a&gt;Code Puzzles&lt;/h2&gt;&lt;p&gt;Recently, I’ve been challenging myself with coding puzzles that are typically used at places like Google, Facebook and Amazon.  Problems that get at issues such as BigO notation, Binary Trees,  Memoization and much more.  I’m doing this for several reasons.  First, working on problems like this reminds me that I’m really not all that smart.  Oh, I can get by, but I don’t challenge myself to produce the best code possible.  Maybe the rant above is more about me than the industry, but I don’t think so.  I think I’ve risen (or more accurately, sunk) to the level of the people I’m surrounded by who themselves are only as high as the people they’ve been working with. &lt;/p&gt;
&lt;p&gt;I’m also doing these problems because being able to do them will inform my code.  Maybe I’ll never actually need to know about depth first vs breath first searches of a binary tree, but if I can do those problems, I will have additional tools in my toolbox when I code the mundane things.  &lt;/p&gt;
&lt;p&gt;And finally, these kinds of problems almost always have edge cases I don’t see.  I really need to get better at discovering edge cases before my clients do. &lt;/p&gt;
&lt;p&gt;And now, here’s the big question.  If these are the kind of questions that Google, Facebook, Amazon and others are using, what do they know that other companies don’t?  Could it be that hiring programmers that can answer these kinds of questions not only ensures that the quality of the code is better, but is actually cheaper in the long run?  Why not hire programmers who are a dime a dozen and can get the job done, but produce crappy code in the process?  I mean, if code quality doesn’t matter like most of our industry thinks, why do these successful companies not just go hire warm bodies?&lt;/p&gt;
&lt;h2 id=&#34;The-Advantage&#34;&gt;&lt;a href=&#34;#The-Advantage&#34; class=&#34;headerlink&#34; title=&#34;The Advantage&#34;&gt;&lt;/a&gt;The Advantage&lt;/h2&gt;&lt;p&gt;The advantage to hiring based on how people think rather than on what tools they know is that when the tools change, it won’t matter to the developer who can think through these tougher issues.  On the other hand, those who can’t won’t be able to grasp some of the newer concepts that show up in newer tools.  I’ve seen this first hand as I’ve tried to explain NgRX, RxJS and Functional Programming generally to some of my peers.  Are they difficult concepts.  Sure they are! Are they worth learning? Absolutely!&lt;/p&gt;
&lt;h2 id=&#34;Be-Intentional&#34;&gt;&lt;a href=&#34;#Be-Intentional&#34; class=&#34;headerlink&#34; title=&#34;Be Intentional&#34;&gt;&lt;/a&gt;Be Intentional&lt;/h2&gt;&lt;p&gt;So, what’s the point of all of this?  Mostly, be intentional. Don’t coast. Learn everything you can about your craft. &lt;/p&gt;
&lt;p&gt;Do you really know what MVC, MVVM, MVP, etc are and how they work? Or, are you just working off of what someone else has told you? &lt;/p&gt;
&lt;p&gt;Do you really know what Agile is? &lt;/p&gt;
&lt;p&gt;How many design patterns do you know that aren’t the hot new trend? &lt;/p&gt;
&lt;p&gt;Could you code your way out of an interview with Google, Facebook or Amazon? &lt;/p&gt;
&lt;p&gt;Where do you want to be with your career next year?  In 5 years? &lt;/p&gt;
&lt;p&gt;Are you average or striving to be awesome? &lt;/p&gt;
&lt;p&gt;Join me on the journey!&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">http://davembush.github.com/using-ngrx-to-cleanly-aggregate-data/</guid>
            <title>Using NgRX to Cleanly Aggregate Data</title>
            <link>http://davembush.github.com/using-ngrx-to-cleanly-aggregate-data/</link>
            <category>angular</category>
            <category>design patterns</category>
            <category>NgRX</category>
            <pubDate>Tue, 03 Oct 2017 06:30:50 -0400</pubDate>
            <description><![CDATA[ &lt;p&gt;For the last 18 months, I’ve been working for an organization that has what some might consider a unique requirement.  Because of where our application’s data is sourced, we need to aggregate data on the client side rather than on the server.  What this means is that for any one screen, we may make multiple calls to the server to grab all the data we need.  Fortunately, because we adopted NgRX early in our adoption of Angular, we could avoid a lot of the headaches associated with client-side aggregation. &lt;figure&gt;&lt;img src=&#34;/uploads/2017/09/2017-10-03.png&#34; title=&#34;Using NgRX to Cleanly Aggregate Data&#34;&gt;&lt;figcaption&gt;Photo credit: &lt;a href=&#34;//www.flickr.com/photos/gsfc/14486243743/&#34;&gt;NASA Goddard Photo and Video&lt;/a&gt; via &lt;a href=&#34;//visualhunt.com/re/296da9&#34;&gt;Visualhunt&lt;/a&gt; &amp;#x2F; &lt;a href=&#34;//creativecommons.org/licenses/by/2.0/&#34;&gt; CC BY&lt;/a&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;span id=&#34;more&#34;&gt;&lt;/span&gt; 

&lt;h2 id=&#34;The-Problem&#34;&gt;&lt;a href=&#34;#The-Problem&#34; class=&#34;headerlink&#34; title=&#34;The Problem&#34;&gt;&lt;/a&gt;The Problem&lt;/h2&gt;&lt;p&gt;There are multiple ways this problem might manifest itself in an application.  But one of the most common is a basic search screen that displays a list of results.  Everything is simple when your data comes back with all the data you need.  But in our case, the data that is returned might contain all but one or two fields that we need.  Those fields exist in other end points.  To keep the basic problem small, let’s just assume that you search for a list of records.  That search returns 10 items.  For each of those records, you now need to make two more calls to retrieve the content of the two missing fields.  This means that to get a complete result set back, you need to make a total of 21 calls.  The problem becomes even worse if you have a total of 100 records, or you now have 3 fields that you need to retrieve for each row.&lt;/p&gt;
&lt;h2 id=&#34;The-Old-Way&#34;&gt;&lt;a href=&#34;#The-Old-Way&#34; class=&#34;headerlink&#34; title=&#34;The Old Way&#34;&gt;&lt;/a&gt;The Old Way&lt;/h2&gt;&lt;p&gt;Prior to using NgRX, the main way we might solve this problem would be to introduce callback hell, or promise hell if you are that lucky.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Make a call for the original list&lt;/li&gt;
&lt;li&gt;When the list gets returned&lt;ul&gt;
&lt;li&gt;Iterate through the records and&lt;ul&gt;
&lt;li&gt;Make a call for Child Record One&lt;ul&gt;
&lt;li&gt;When callback returns, add the new value to the parent record&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Make a call for Child Record Two&lt;ul&gt;
&lt;li&gt;When the callback returns, add the new value to the parent record&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Once all the calls have returned, return the list so it can be displayed.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;As you can see, this not only becomes difficult to manage, but it also introduces a system that is going to be perceived as slow. &lt;/p&gt;
&lt;p&gt;But, now, we can do better.&lt;/p&gt;
&lt;h2 id=&#34;Using-NgRX&#34;&gt;&lt;a href=&#34;#Using-NgRX&#34; class=&#34;headerlink&#34; title=&#34;Using NgRX&#34;&gt;&lt;/a&gt;Using NgRX&lt;/h2&gt;&lt;p&gt;By using NgRX, we use a series of Effects to retrieve our data, typically via a Service.  When the effect is done, it returns the results to a reducer which puts them in our store entity for us. &lt;/p&gt;
&lt;p&gt;The basic work flow looks like something like this:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Dispatch an action to get the main results&lt;/li&gt;
&lt;li&gt;Effect hears the action and makes a call for the top-level list&lt;/li&gt;
&lt;li&gt;When the list returns,&lt;ul&gt;
&lt;li&gt;Iterate through the records and&lt;ul&gt;
&lt;li&gt;we dispatch an action to get Child Record One&lt;/li&gt;
&lt;li&gt;we dispatch an action to get Child Record Two&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Return an Action that will use a reducer to fill our list&lt;/li&gt;
&lt;li&gt;Child Record One Effect hears the actions for each of the rows&lt;/li&gt;
&lt;li&gt;When each of the values are retrieved the Effect returns an Action that uses a Reducer to put the value in the store&lt;/li&gt;
&lt;li&gt;Child Record Two Effect hears the actions for each of the rows&lt;/li&gt;
&lt;li&gt;When each of the values are retrieved, the Effect returns an Action that uses a Reducer to put the value in the store&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You’ll notice, we no longer have the nesting mess that we had using the old way and we can list our results as soon as the first set of data is returned.&lt;/p&gt;
&lt;h2 id=&#34;Meanwhile-back-on-our-View&#34;&gt;&lt;a href=&#34;#Meanwhile-back-on-our-View&#34; class=&#34;headerlink&#34; title=&#34;Meanwhile, back on our View&#34;&gt;&lt;/a&gt;Meanwhile, back on our View&lt;/h2&gt;&lt;p&gt;Now, there are two ways you can deal with displaying this information in your view and it all depends on what you are doing. &lt;/p&gt;
&lt;p&gt;The easy way is to just let the View display the information as it comes back.  Most of the time this will work.  If you need to filter your data in the display once it comes back, you will need to decide if data that doesn’t have the child fields yet should, or should not be displayed. &lt;/p&gt;
&lt;p&gt;Another quirk I had to deal with was that we were displaying child rows with child rows.  Letting the data display as we got it back gave the screen a kind of exploding effect.  For this, I added a debounceTime(500) to the store observer so that the screen only updated once all the data had been retrieved.  Using the pattern above was still easier to reason about than the old way, we just didn’t get the added benefit of being able to see the data as it was being retrieved.&lt;/p&gt;
&lt;h2 id=&#34;Watch-Out&#34;&gt;&lt;a href=&#34;#Watch-Out&#34; class=&#34;headerlink&#34; title=&#34;Watch Out!&#34;&gt;&lt;/a&gt;Watch Out!&lt;/h2&gt;&lt;p&gt;One of the wrong ways you might be tempted to use this pattern would be to chain all the child stuff in one effect and dispatch actions to your reducers from within the one Effect.  This would be a mistake.  Sure, it would work.  But now because your effect is doing more than one thing, your code becomes MUCH harder to reason about.  While each of your Effects may ultimately call the same reducer function, or not, you definitely want to have a separate set of Actions and Effects that retrieve the data from the server.&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">http://davembush.github.com/ngrx-store-coding-sanity-epiphany/</guid>
            <title>NgRX/Store Coding Sanity Epiphany</title>
            <link>http://davembush.github.com/ngrx-store-coding-sanity-epiphany/</link>
            <category>angular</category>
            <category>design patterns</category>
            <category>NgRX</category>
            <pubDate>Tue, 06 Jun 2017 06:30:44 -0400</pubDate>
            <description><![CDATA[ &lt;p&gt;Maybe this is all obvious to you, but since I don’t see anyone talking about this when I search for “how to do NgRX” or the various variants, I thought I’d call it out in this weeks post.&lt;/p&gt;
&lt;p&gt;If you haven’t been following along, you’ll want to review &lt;a href=&#34;/tags/ngrx/&#34;&gt;my previous posts on NgRX&lt;/a&gt;.&lt;/p&gt;
&lt;figure&gt;![](/uploads/2017/06/2017-06-06.jpg &#34;NgRX/Store Coding Sanity Epiphany&#34;)&lt;figcaption&gt;Photo credit: [spcbrass](//www.flickr.com/photos/spcbrass/394867154/) via [Visual Hunt](//visualhunt.com/re/cff786) / [ CC BY-SA](//creativecommons.org/licenses/by-sa/2.0/)&lt;/figcaption&gt;&lt;/figure&gt;

&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;

&lt;p&gt;If it isn’t clear yet, I’m still sorting out a lot of this Angular&amp;#x2F;Redux&amp;#x2F;NgRX stuff. But as I was working on my current project this week, I realized I have WAY too much code in my presentation layer.&lt;/p&gt;
&lt;h2 id=&#34;The-Epiphany&#34;&gt;&lt;a href=&#34;#The-Epiphany&#34; class=&#34;headerlink&#34; title=&#34;The Epiphany&#34;&gt;&lt;/a&gt;The Epiphany&lt;/h2&gt;&lt;p&gt;I have two main screens I’m working on. As you read the articles on the Internet that explain how to use this pattern or the Redux pattern it was derived from, you’ll quickly learn that you want to work with a “Smart Component.” This component is kind of a traffic cop. It uses observables to listen to state change in your Store and it sends actions to, primarily, update the database and change the store’s state. From what I’ve been able to gather, the expectation is that a lot of the logic that would be needed to actually process the data is going to go in this smart component. The first screen I worked on, followed this basic pattern. This put a whole crap load of code in my smart component.&lt;/p&gt;
&lt;p&gt;On the second page, I kind of stumbled onto what I believe is a cleaner model. I realized that I was hanging onto data in my smart component that was also in my store. That seems kind of dumb. If all I need is in my store, why not just fire off an action to do whatever it is I want to do and have the @Effect grab the data from the store?&lt;/p&gt;
&lt;p&gt;This is why I ended up making my smart component listen to the observables and dispatch events to the store based on changes in my components. This includes things like button clicks. Any other processing that needs to take place takes place in either an @Effect or is called from an @Effect.&lt;/p&gt;
&lt;p&gt;I can’t describe for you how much cleaner my codebase is as a result! WOW!&lt;/p&gt;
&lt;p&gt;But, will it work on the first page the same as it works on the second page?&lt;/p&gt;
&lt;h2 id=&#34;The-Test&#34;&gt;&lt;a href=&#34;#The-Test&#34; class=&#34;headerlink&#34; title=&#34;The Test&#34;&gt;&lt;/a&gt;The Test&lt;/h2&gt;&lt;p&gt;You see, there is a big difference between the first page and the second page. The first page is basically a search and list page. The second page is an edit page for an item. On the first page, I had multiple store entities for the various parts. I had an entity for the search fields. An entity for the search results. And others. Let’s just say my model isn’t very flat.&lt;/p&gt;
&lt;p&gt;The fact of the matter is, the second page that I created wasn’t really all that flat either. But because I started with the concept of not putting any logic in my smart component, it felt easier to manage.&lt;/p&gt;
&lt;p&gt;So, the first thing I wanted to do was to create a reducer for the page. All this reducer will do is distribute the action down into sub-reducers. This allowed me to keep all of my action code the same. The only thing that changes is that the directories for my sub-reducers and the @Effects, Actions and Interfaces that are associated with them go under my directory for my main Reducer and Model.&lt;/p&gt;
&lt;p&gt;I still have a bit of code that I’d like to clean up, but on the whole, I like this pattern much better than what I was doing before.&lt;/p&gt;
&lt;h2 id=&#34;Advantages&#34;&gt;&lt;a href=&#34;#Advantages&#34; class=&#34;headerlink&#34; title=&#34;Advantages&#34;&gt;&lt;/a&gt;Advantages&lt;/h2&gt;&lt;p&gt;The main advantage to using this new architecture is that it simplifies and reduces testing considerations.&lt;/p&gt;
&lt;p&gt;For example, because all my presentation layer is now doing is either reflecting the state that is in my store or telling my store to do something, there really isn’t much, if anything, left to test in my presentation layer. If you’ve written your code correctly, none of the methods in your view should have a cyclomatic complexity of greater than two. You may still want to write some end-to-end tests to make sure that the NgRX&amp;#x2F;Store loop is working correctly. But that is an entirely different subject.&lt;/p&gt;
&lt;p&gt;This does not mean that we don’t have to test anything. All of that code had to go some place, right?&lt;/p&gt;
&lt;p&gt;But, here’s the deal. Because the code is in an @Effect or a Service (generally) your tests become much more simple. You might have to dummy up a store or a service. But for the most part, your tests won’t really look much different that tests you would write for regular JavaScript code without a framework.&lt;/p&gt;
&lt;p&gt;The other HUGE advantage to using this architecture is that it allows you to distribute your code so that no file is too large and hard to reason about. It allows you to follow the “Single Responsibility Principle” in greater granularity than you might otherwise be able to do.&lt;/p&gt;
&lt;p&gt;And finally, this architecture allows you to treat all the component code: the html template, the CSS, and the TypeScript file, as all View code. And I think this is where many people are confused about Angular.&lt;/p&gt;
&lt;h2 id=&#34;View-Confusion&#34;&gt;&lt;a href=&#34;#View-Confusion&#34; class=&#34;headerlink&#34; title=&#34;View Confusion&#34;&gt;&lt;/a&gt;View Confusion&lt;/h2&gt;&lt;p&gt;In a MVC or even an MVVM pattern, we’ve also considered the HTML template the “View” and the JavaScript (or in our case, TypeScript) code the controller. This is a common misconception that I believe the ASP.NET crowd still gets wrong. Code-behind code isn’t your controller. It is helper code for your View. And so, we end up putting processing code in our view, when it really belongs in an entirely different file. This is what the Model View Presenter pattern solves. If you aren’t going to use NgRX and Reactive Forms, you should check out MVP as a way of architecting your code using the older Template Driven Forms approach that was common in AngularJS.&lt;/p&gt;
&lt;h2 id=&#34;Code&#34;&gt;&lt;a href=&#34;#Code&#34; class=&#34;headerlink&#34; title=&#34;Code&#34;&gt;&lt;/a&gt;Code&lt;/h2&gt;&lt;p&gt;For the purposes of this article, I’m going to assume you’ve read my other articles which I’ve linked to at the beginning of this post.&lt;/p&gt;
&lt;p&gt;So first, the basic directory and file structure of this new method might look something like this:&lt;/p&gt;
&lt;figure class=&#34;highlight text&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;app/&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; +-store/&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   +-route1/&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;     +-sub-reducer1/&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;       --sub-reducer1.actions.ts&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;       --sub-reducer1.effects.ts&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;       --sub-reducer1.model.ts&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;       --sub-reducer1.reducer.ts&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;     +-sub-reducer2/&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;     --route1.actions.ts&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;     --route1.effects.ts&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;     --route1.model.ts&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;     --route1.reducer.ts&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   +-route2/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;Some things to note:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Your Actions are defined in the target. You would seldom, if ever, define an action at the route level.&lt;/li&gt;
&lt;li&gt;Effects are optional, just like any other time you would use them.&lt;/li&gt;
&lt;li&gt;Effects are seldom, if ever, defined at the route level.&lt;/li&gt;
&lt;li&gt;I’m using “route1” etc and “sub-reducer1” etc as sample names. Use names that represent your route names and the data you are storing.&lt;/li&gt;
&lt;li&gt;The only reducers that gets defined in our app.store.ts file are the reducers in the route directories.&lt;/li&gt;
&lt;li&gt;You still need to register each of your effects in app.store.ts as you have been doing.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The next thing that is probably not clear is that your top-level model, ie “route1.model.ts” should only hold the sub-reducers. I’ve also found it useful to make all of my top-level properties optional.&lt;/p&gt;
&lt;figure class=&#34;highlight typescript&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;interface&lt;/span&gt; &lt;span class=&#34;title class_&#34;&gt;Route1Model&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  subItem1?: &lt;span class=&#34;title class_&#34;&gt;SubModel1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   subItem2?: &lt;span class=&#34;title class_&#34;&gt;SubModel2&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;And this is used in your route reducer as:&lt;/p&gt;
&lt;figure class=&#34;highlight typescript&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;title function_&#34;&gt;route1Reducer&lt;/span&gt;(&lt;span class=&#34;params&#34;&gt;state: Route1Model =&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;  &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;    subReducer1: &amp;#123;/* subReducer definition here */&amp;#125;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;    subReducer2: &amp;#123;/* subReducer definition here */&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;  &amp;#125;, action: Action&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;span class=&#34;comment&#34;&gt;// process action here&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;title class_&#34;&gt;Route1Reducer&lt;/span&gt;: &lt;span class=&#34;title class_&#34;&gt;ActionReducer&lt;/span&gt;&amp;lt;&lt;span class=&#34;title class_&#34;&gt;Route1Model&lt;/span&gt;&amp;gt; = route1Reducer;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;Now, the trick we need to implement is that we need to delegate the actions down to the appropriate reducers and we only want to change the state object to a new object if a child state has changed.&lt;/p&gt;
&lt;p&gt;In the top level reducer, you need to put code that looks something like this:&lt;/p&gt;
&lt;figure class=&#34;highlight typescript&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;const&lt;/span&gt; reducerList = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;attr&#34;&gt;subReducer1&lt;/span&gt;: subReducer1,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;attr&#34;&gt;subReducer2&lt;/span&gt;: subReducer2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;let&lt;/span&gt; returnState = state;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;title class_&#34;&gt;Object&lt;/span&gt;.&lt;span class=&#34;title function_&#34;&gt;keys&lt;/span&gt;(reducerList).&lt;span class=&#34;title function_&#34;&gt;map&lt;/span&gt;(&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;params&#34;&gt;item&lt;/span&gt; =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;const&lt;/span&gt; newState = reducerList[item](state[item], action);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;if&lt;/span&gt;(newState !== state[item]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      &lt;span class=&#34;keyword&#34;&gt;const&lt;/span&gt; newItem = &amp;#123;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      newItem[item] = newState;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      returnState = &lt;span class=&#34;title class_&#34;&gt;Object&lt;/span&gt;.&lt;span class=&#34;title function_&#34;&gt;assign&lt;/span&gt;(&amp;#123;&amp;#125;, returnState, newItem);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; returnState;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;The key here is that you want the property names in the reducerList to be the same name as what is in the Route1Model and you want the values assigned to them to be the function pointer (notice, no parenthesis) that should be called.&lt;/p&gt;
&lt;p&gt;The actual sub-reducers look like a regular reducer.  The only real difference is that you will be calling the function that returns the state, the second export statement we normally put in our reducers that returns the ActionReducer&amp;lt;&amp;gt; is not needed.&lt;/p&gt;
&lt;p&gt;So, our Object.keys().map() processes each reducer and updates the parent object if the child has changed.&lt;/p&gt;
&lt;p&gt;Now, by way of reminder. You can observe all the store, or part of the store. So, your smart component might observe just a sub entity or the whole entity depending on the need at the moment.&lt;/p&gt;
&lt;p&gt;Finally, lets say you want to have a “Save” button that causes the information in your store to be persisted to a database. You would place a method in your smart component that gets triggered by the button and fires a “Save” action to an @Effect.&lt;/p&gt;
&lt;figure class=&#34;highlight typescript&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;title function_&#34;&gt;save&lt;/span&gt;(&lt;span class=&#34;params&#34;&gt;event&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  event.&lt;span class=&#34;title function_&#34;&gt;stopPropagation&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;variable language_&#34;&gt;this&lt;/span&gt;.&lt;span class=&#34;property&#34;&gt;store&lt;/span&gt;.&lt;span class=&#34;title function_&#34;&gt;dispatch&lt;/span&gt;(&lt;span class=&#34;title class_&#34;&gt;Route1Actions&lt;/span&gt;.&lt;span class=&#34;title function_&#34;&gt;save&lt;/span&gt;());&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;literal&#34;&gt;false&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;Your @effect will respond, and since @Effects typically already have a store injected into them, you can use the store to retrieve the data.&lt;/p&gt;
&lt;figure class=&#34;highlight typescript&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@Effect&lt;/span&gt;(&amp;#123;&lt;span class=&#34;attr&#34;&gt;dispatch&lt;/span&gt;: &lt;span class=&#34;literal&#34;&gt;false&lt;/span&gt;&amp;#125;) _save$ = &lt;span class=&#34;variable language_&#34;&gt;this&lt;/span&gt;.&lt;span class=&#34;property&#34;&gt;update$&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  .&lt;span class=&#34;title function_&#34;&gt;ofType&lt;/span&gt;(&lt;span class=&#34;title class_&#34;&gt;StagedEditActions&lt;/span&gt;.&lt;span class=&#34;property&#34;&gt;SAVE&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  .&lt;span class=&#34;title function_&#34;&gt;switchMap&lt;/span&gt;(&lt;span class=&#34;function&#34;&gt;() =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;variable language_&#34;&gt;this&lt;/span&gt;.&lt;span class=&#34;property&#34;&gt;store&lt;/span&gt;.&lt;span class=&#34;title function_&#34;&gt;select&lt;/span&gt;(&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;params&#34;&gt;x&lt;/span&gt; =&amp;gt;&lt;/span&gt; x.&lt;span class=&#34;property&#34;&gt;route1&lt;/span&gt;).&lt;span class=&#34;title function_&#34;&gt;first&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  .&lt;span class=&#34;title function_&#34;&gt;map&lt;/span&gt;(&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;params&#34;&gt;route1Data&lt;/span&gt; =&amp;gt;&lt;/span&gt; &lt;span class=&#34;variable language_&#34;&gt;this&lt;/span&gt;.&lt;span class=&#34;property&#34;&gt;service&lt;/span&gt;.&lt;span class=&#34;title function_&#34;&gt;save&lt;/span&gt;(route1Data))&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  .&lt;span class=&#34;title function_&#34;&gt;map&lt;/span&gt;(requestId$ =&amp;gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    requestId$.&lt;span class=&#34;title function_&#34;&gt;subscribe&lt;/span&gt;(&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;params&#34;&gt;id&lt;/span&gt; =&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      &lt;span class=&#34;variable language_&#34;&gt;this&lt;/span&gt;.&lt;span class=&#34;property&#34;&gt;store&lt;/span&gt;.&lt;span class=&#34;title function_&#34;&gt;dispatch&lt;/span&gt;(route1Actions.&lt;span class=&#34;title function_&#34;&gt;load&lt;/span&gt;(id))&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">http://davembush.github.com/using-real-world-ngrx/</guid>
            <title>Using Real World NgRX</title>
            <link>http://davembush.github.com/using-real-world-ngrx/</link>
            <category>angular</category>
            <category>design patterns</category>
            <category>NgRX</category>
            <pubDate>Tue, 09 May 2017 06:30:00 -0400</pubDate>
            <description><![CDATA[ &lt;p&gt;This week, I want to demonstrate some ways you might use NgRX in your own code.&lt;/p&gt;
&lt;h2 id=&#34;Review&#34;&gt;&lt;a href=&#34;#Review&#34; class=&#34;headerlink&#34; title=&#34;Review&#34;&gt;&lt;/a&gt;Review&lt;/h2&gt;&lt;p&gt;Last week we went into a lot of detail about how the NgRX system should be wired together. Here is all of that in picture form.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/uploads/2017/05/image.png&#34; alt=&#34;image&#34; title=&#34;image&#34;&gt;&lt;/p&gt;
&lt;p&gt;A component fires an event to either an effect or a reducer using an action. If an effect was called, it fires another action which is normally picked up by a reducer. The Reducer mutates the state which then gets placed in the store. “Magic happens here.” You don’t write any code to get it to the store other than that you create a reducer. Anything that is observing the table in the store that got changed will get notified via RxJS observables and the cycle is complete.&lt;/p&gt;
&lt;p&gt;Note that the action you dispatch can be handled by either an Effect, a Reducer or both.&lt;/p&gt;
&lt;h2 id=&#34;Basic-CRUD&#34;&gt;&lt;a href=&#34;#Basic-CRUD&#34; class=&#34;headerlink&#34; title=&#34;Basic CRUD&#34;&gt;&lt;/a&gt;Basic CRUD&lt;/h2&gt;&lt;p&gt;Most of the time, we think of NgRX as a way of handling CRUD operations. We need to see the current record so we fire off a LOAD action that uses an effect to retrieve the data from the database. Once the data comes back, we return an action that tells the reducer to put that new data into the store. Since our component is observing the store, it updates the screen with the new values.&lt;/p&gt;
&lt;p&gt;If we need to add a record, we fire an ADD action. If we need to delete we fire a DELETE action. If we need to update, we fire an UPDATE action. Each of these are picked up by the Effect, which then fires an action that places new state information in the store via the Reducer.&lt;/p&gt;
&lt;h2 id=&#34;Wait-State&#34;&gt;&lt;a href=&#34;#Wait-State&#34; class=&#34;headerlink&#34; title=&#34;Wait State&#34;&gt;&lt;/a&gt;Wait State&lt;/h2&gt;&lt;p&gt;When most people think of how to use NgRX or any similar pattern, they immediately think of the CRUD pattern I mentioned above. But, we don’t have to start the Action chain from a component. For that matter, we don’t have to listen to our Store data from a component either.&lt;/p&gt;
&lt;p&gt;One way I’ve implemented NgRX that solves a lot of common issues is that I’ve created a wait state component that shows when a count variable has been incremented and doesn’t show when the count is zero. Since Store is &lt;code&gt;Injectable&lt;/code&gt;, I can increment and decrement the count from just about anywhere. Most often I increment it from an effect just before I make an AJAX call and decrement it in a finally() block of the Http observable. I have a start() action that increments the count and an end() action that decrements the count and ensures that I never go below zero. I can start off multiple asynchronous processes which will all increment the counter and decrement the counter appropriately. The wait state GUI displays until everything has finished.&lt;/p&gt;
&lt;p&gt;This is OH! So much easier than how we’ve had to handle this problem with other design patterns. I’m not saying it couldn’t be done, or that it was even particularly hard. But this way is easier.&lt;/p&gt;
&lt;h2 id=&#34;Error-Handling&#34;&gt;&lt;a href=&#34;#Error-Handling&#34; class=&#34;headerlink&#34; title=&#34;Error Handling&#34;&gt;&lt;/a&gt;Error Handling&lt;/h2&gt;&lt;p&gt;Another place where you might want to present information but trigger the display from just about anywhere is with error handling. In the code I work on, I have a modal popup component that displays whenever my error collection has something in it. Anytime I need to display an error, I add the error to the collection via an Action and it magically displays. The great thing about this mechanism is that regardless of how many errors I send to the collection, they all display until I close the window, which clears out the collection.&lt;/p&gt;
&lt;h2 id=&#34;Page-State&#34;&gt;&lt;a href=&#34;#Page-State&#34; class=&#34;headerlink&#34; title=&#34;Page State&#34;&gt;&lt;/a&gt;Page State&lt;/h2&gt;&lt;p&gt;Most page state is handled by the fact that we’ve stored the data into a database. But there are times when we want to come back to a page we had been working on previously and we want it to display with the data that was on it at the time we left.&lt;/p&gt;
&lt;p&gt;Or maybe you want to work on a series of pages prior to saving so that everything gets saved as a set.&lt;/p&gt;
&lt;p&gt;No matter. You can use NgRX to store everything into the store and a separate action can trigger an effect that pushes that data to the database.&lt;/p&gt;
&lt;p&gt;Or, as is the case in an application I’m working on, I’m using a form to search a database. When I come back, I want the same search fields and I want the search to reinitialized. In my particular case, I don’t have a search field. You change a field, a new search is automatically initiated. This case is just a little bit more complicated than what we’ve looked at so far.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/uploads/2017/05/image-1.png&#34; alt=&#34;image&#34; title=&#34;image&#34;&gt;&lt;/p&gt;
&lt;p&gt;In order to keep the state information available so that it is there when I come back to it, I need to store that information in the search table via the Search Reducer. So, every time something changes in the Search Form, I send off an action to the Search Reducer so that the change can be recorded.&lt;/p&gt;
&lt;p&gt;Meanwhile, the Search Form also is listening to the Search Table so that when it comes back it can put the changes in the form, and it can send an action to the Search Results Reducer telling it to search for the information. When it gets the results, the Search Results Table picks them up and since the Search Results Component is listening to the Search Results Table, they display.&lt;/p&gt;
&lt;p&gt;If I leave the page, the Search Form grabs the current search parameters from the Search Table and Fills the Form and sends the action to the Search Results Reducer and the page is back where we left it.&lt;/p&gt;
&lt;h2 id=&#34;Conclusion&#34;&gt;&lt;a href=&#34;#Conclusion&#34; class=&#34;headerlink&#34; title=&#34;Conclusion&#34;&gt;&lt;/a&gt;Conclusion&lt;/h2&gt;&lt;p&gt;The point is, NgRX isn’t just about basic CRUD forms and because there are multiple ways you can mix and match the parts, even your basic CRUD implementation has a lot more flexibility than you might be used to.&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">http://davembush.github.com/the-myth-of-sloppy-code/</guid>
            <title>The Myth of Sloppy Code</title>
            <link>http://davembush.github.com/the-myth-of-sloppy-code/</link>
            <category>tdd</category>
            <category>agile</category>
            <category>design patterns</category>
            <pubDate>Tue, 18 Oct 2016 06:30:00 -0400</pubDate>
            <description><![CDATA[ &lt;ul&gt;
&lt;li&gt;Tightly coupled code runs faster.&lt;/li&gt;
&lt;li&gt;Tightly coupled code is easier to write.&lt;/li&gt;
&lt;li&gt;Test Driven Development increases development time.&lt;/li&gt;
&lt;li&gt;Test Driven Development negatively impacts code design.&lt;/li&gt;
&lt;li&gt;Knowing the names of design patterns isn’t important as long as you can use them.&lt;/li&gt;
&lt;li&gt;All my customer cares about is how soon they can have the product, not how clean the code is.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;All of these statements, and others like them, are excuses for not writing code correctly. And you know what an excuse is, right?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The skin of a reason stuffed with a lie.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure&gt;![](/uploads/2016/10/image-1.png &#34;The Myth of Sloppy Code&#34;)&lt;figcaption&gt;Photo credit: [dynamosquito](//www.flickr.com/photos/dynamosquito/5866244470/) via [Visualhunt.com](//visualhunt.com) / [CC BY-SA](//creativecommons.org/licenses/by-sa/2.0/)&lt;/figcaption&gt;&lt;/figure&gt;

&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;  

&lt;p&gt;Now, I could go through and argue each of the points above. But today, I want to look more at the attitude behind these statements.&lt;/p&gt;
&lt;h2 id=&#34;It’s-All-in-Your-Head&#34;&gt;&lt;a href=&#34;#It’s-All-in-Your-Head&#34; class=&#34;headerlink&#34; title=&#34;It’s All in Your Head&#34;&gt;&lt;/a&gt;It’s All in Your Head&lt;/h2&gt;&lt;p&gt;Man is a funny being. We make decisions with our hearts and justify the decisions with our brains. Once you know this, you can hack it to your favor. But how does this relate to what we’ve been talking about? It is really quite simple. All of the best practices I’ve mentioned above require work to learn. We would rather not invest the time to learn how to do these well, and so rather than just saying, “this is not where I choose to spend my time right now” we say things like, “my management won’t let me do that” or “my way is more efficient” or at times, we even resort to vilifying the practice.&lt;/p&gt;
&lt;p&gt;I have the same issue when I try to convince management that their process needs to change. It took seven years for me to get one company to move their project management system from email to project management software. Why? Because what they were doing “worked” and they couldn’t see that doing something different would work better in any way.&lt;/p&gt;
&lt;h2 id=&#34;A-Skin-of-a-Reason&#34;&gt;&lt;a href=&#34;#A-Skin-of-a-Reason&#34; class=&#34;headerlink&#34; title=&#34;A Skin of a Reason&#34;&gt;&lt;/a&gt;A Skin of a Reason&lt;/h2&gt;&lt;p&gt;So, let’s look at the parts of these myths that are true.&lt;/p&gt;
&lt;p&gt;First, it is true that while you are learning how to use any one of these best practices, it will in fact, take you longer to write your code. Tightly coupled code is easier to reason about and one could argue is therefore easier to write. Test Driven Development is one of the most difficult things to learn. And just like the myth that Agile&amp;#x2F;Scrum&amp;#x2F;Kanban doesn’t work, the myth that Test Driven Development doesn’t work is largely based on misconceptions about what Test Driven Development is. Initially, it will impact the time it takes for you to write your code. But the more interesting argument to me is that testing negatively impacts design. If you mean that you can’t use the design you are used to using and that design involves writing tightly coupled code. Yeah, I guess it does.&lt;/p&gt;
&lt;p&gt;Implementing design patterns is better than not. It is true. But that doesn’t mean you shouldn’t learn the names.&lt;/p&gt;
&lt;p&gt;Yes, your customer cares about how fast you can get the project done. But, that isn’t all they care about.&lt;/p&gt;
&lt;h2 id=&#34;The-Lies&#34;&gt;&lt;a href=&#34;#The-Lies&#34; class=&#34;headerlink&#34; title=&#34;The Lies&#34;&gt;&lt;/a&gt;The Lies&lt;/h2&gt;&lt;p&gt;Just because something takes longer while you are learning how to do it, doesn’t mean it will always take longer. It probably took you a while to learn how to program proficiently too. That didn’t stop you did it? Does it take you as long to program now as when you first started? Of course not! Let’s look at this from another angle. As you’ve learned multiple languages, would you say that it made you a better or worse programmer? Unless you have a very strange perspective, you will probably answer better. Was the new language hard to learn? Of course. Did it take you longer to code using the new language than one you knew previously? Of course. Would you say the result of being proficient in both has made it easier or harder to code in both? Easier, right? Tightly coupled code is easier to write, but as the application grows, tightly coupled code becomes harder to add to and harder to maintain. It lends itself to code duplication and is more likely to be the code base that needs to be rewritten first.&lt;/p&gt;
&lt;p&gt;Tightly coupled code is also the hardest to tests and is probably the reason you don’t want to write test for your code. Because you write tightly coupled code, testing is MUCH harder than it should be. This leads you to have a firm belief that writing tests is hard as well. A vicious cycle.&lt;/p&gt;
&lt;p&gt;And if you believe that tightly coupled code is a proper design, you will believe that tightly coupled code hinders design. But in fact, writing tests will force you to write loosely coupled code. So, instead of hindering design, it actually helps it.&lt;/p&gt;
&lt;p&gt;I used to think not learning the correct names for design patterns didn’t matter. But the advantage of knowing the proper name for things is that we can all talk about something using the name rather than trying to explain what that thing is with lots of words. It saves time. But, there is another much more subtle reason why you need to learn the proper name for things. You might be calling a design pattern you are using by an incorrect name and confusing the people you are communicating with. And, finally, learning the names for all of the design patterns will expose you to design patterns you aren’t aware of, broadening your horizons.&lt;/p&gt;
&lt;p&gt;This last one is, or should be the most obvious. Getting the project done quickly isn’t ALL your customer cares about. It might be a relatively high priority, but I can assure you, if you explain to them that getting the project done as fast as possible will mean you have to rewrite the code if they want any changes, you’ll quickly find out that redoing work they’ve already paid for doesn’t sit well with them either.&lt;/p&gt;
&lt;h2 id=&#34;Benefits&#34;&gt;&lt;a href=&#34;#Benefits&#34; class=&#34;headerlink&#34; title=&#34;Benefits&#34;&gt;&lt;/a&gt;Benefits&lt;/h2&gt;&lt;p&gt;It is a sad, sad truth that by convincing yourself that not investing in these best practices really is best for you and the clients you work for, you’ve also limited yourself to the quality of client you can work for. The places that pay well expect you to know how to do this stuff. They believe in good design. They believe in testing. They know how to implement design patterns.&lt;/p&gt;
&lt;p&gt;And guess what, these places also pay better too. It raises you beyond the level of “commodity programmer” and into the level of “rare gem” How do I know? This past year I’ve been doing a lot of interviewing. For various reasons, I decided to interview for jobs that pay 25% better than what I currently make. In the beginning, I did this because I figured it would expose me to people more like myself who wanted to be better. In the process, I discovered that the interview process is a little harder, but not impossible. I figured out what I still need to learn. And, I managed to beat my goal. Time to notch it up a bit more.&lt;/p&gt;
&lt;h2 id=&#34;Are-You-Dead&#34;&gt;&lt;a href=&#34;#Are-You-Dead&#34; class=&#34;headerlink&#34; title=&#34;Are You Dead?&#34;&gt;&lt;/a&gt;Are You Dead?&lt;/h2&gt;&lt;p&gt;You hear stories all the time about people who can’t find work in our industry. When you ask, you find out that all they know is something that was hot 10 years ago or longer. Well, of course you can’t find a job. And it is no wonder the last company got rid of you. You provide no value.&lt;/p&gt;
&lt;p&gt;This past week I heard someone tell me the equivalent of, “I’m not going to learn anything new. Every time I do, it ends up being hot for a few years and then it is gone.” I was stunned. I fear for this guy. You might as well say, “I’m planning to retire in 10 years or less.” because that is what will happen to you. Worse, if you stop learning completely, you could end up with dementia or worse.&lt;/p&gt;
&lt;p&gt;My plan is to program until I’m at least 75. Longer if I stay healthy enough. Even if I could retire, I won’t. What would I do? I love programming. I love mentoring other programmers. I love learning new stuff.&lt;/p&gt;
&lt;h2 id=&#34;Do-hard-stuff&#34;&gt;&lt;a href=&#34;#Do-hard-stuff&#34; class=&#34;headerlink&#34; title=&#34;Do hard stuff&#34;&gt;&lt;/a&gt;Do hard stuff&lt;/h2&gt;&lt;p&gt;And so what’s the point of all this? Do hard stuff. It will make you a better programmer.&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">http://davembush.github.com/are-you-average-or-awesome-9-ways-to-improve/</guid>
            <title>Are You Average or Awesome? 9 Ways to Improve.</title>
            <link>http://davembush.github.com/are-you-average-or-awesome-9-ways-to-improve/</link>
            <category>tdd</category>
            <category>interview</category>
            <category>best practices</category>
            <category>design patterns</category>
            <pubDate>Thu, 12 May 2016 07:30:00 -0400</pubDate>
            <description><![CDATA[ &lt;p&gt;The story goes that there were two men, Joe and Frank, who were camping out in the woods when a bear showed up in the camp.  Terrified, they decided the best they could do would be to stay perfectly still until the bear left.  Hopefully, the bear wouldn’t notice them.  As the bear was poking around, Joe says to Frank, “What are we going to do if this doesn’t work?”  Frank says, “Run!”  Joe says, “You really think we can out run a bear?”  Frank says, “I don’t need to out run the bear.  I only need to out run you.”&lt;/p&gt;
&lt;figure&gt;![](/uploads/2016/05/image.png &#34;9 Ways to Improve&#34;)&lt;figcaption&gt;Photo credit: [Internet Archive Book Images](//www.flickr.com/photos/internetarchivebookimages/14767148885/) via [VisualHunt.com](//visualhunt.com) / [No known copyright restrictions](//flickr.com/commons/usage/)&lt;/figcaption&gt;&lt;/figure&gt;

&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;

&lt;p&gt;For years I have used this story to encourage my kids to be better than their peers.  Right now, most people are so “out of shape” that “running faster” than the competition is easy.  By comparison, my kids look awesome when by any other measure, they are probably only doing the bare minimum necessary.  This is not to say they aren’t REALLY good at what they do but, there is always room for improvement.&lt;/p&gt;
&lt;h2 id=&#34;Average-Programmers&#34;&gt;&lt;a href=&#34;#Average-Programmers&#34; class=&#34;headerlink&#34; title=&#34;Average Programmers&#34;&gt;&lt;/a&gt;Average Programmers&lt;/h2&gt;&lt;p&gt;And then there are conversations I have with other programmers.  So many think they are great when they are only slightly better than the people they are working with.  The lack of desire to learn more, to be any better than adequate, is appalling.  And this is to say nothing of the programmers who never make the cut.  The ones I never work with because the people I work with and for won’t hire them.  I’ve been a part of some of those interviews.&lt;/p&gt;
&lt;p&gt;People who can’t answer the most basic of &lt;a href=&#34;/7-c-interview-questions-that-weed-out-the-losers/&#34;&gt;C#&lt;/a&gt;, ASP.NET, or &lt;a href=&#34;/7-javascript-interview-questions-to-weed-out-imposters/&#34;&gt;JavaScript questions&lt;/a&gt;.  This is to say nothing of &lt;a href=&#34;/5-reasons-learning-terminology-increases-your-effectiveness-as-a-programmer/&#34;&gt;people who believe knowing concepts trumps knowing the terms&lt;/a&gt; that specify them.&lt;/p&gt;
&lt;h2 id=&#34;Average-Organizations&#34;&gt;&lt;a href=&#34;#Average-Organizations&#34; class=&#34;headerlink&#34; title=&#34;Average Organizations&#34;&gt;&lt;/a&gt;Average Organizations&lt;/h2&gt;&lt;p&gt;And then there are the organizations who settle for frameworks that provide “Silver Bullet” answers to problems.  Not because this is technically, the best solutions, but because this is the solution the requires the least from the developers they have working for them.  The problem with this approach is that it doesn’t demand excellence from the programming team that works for them.  And don’t get me started on managers who think they are “doing Agile” who obviously don’t even recognize that “Agile” is not a noun.&lt;/p&gt;
&lt;p&gt;The problem with comparing ourselves to our peers is that you can always find someone worse than yourself.  Not only is this true because you will always find someone who just doesn’t care, but even if we all cared, there will always be someone, who for any number of reasons, can’t be as good as you are.&lt;/p&gt;
&lt;h2 id=&#34;Be-Awesome&#34;&gt;&lt;a href=&#34;#Be-Awesome&#34; class=&#34;headerlink&#34; title=&#34;Be Awesome&#34;&gt;&lt;/a&gt;Be Awesome&lt;/h2&gt;&lt;p&gt;But we can all strive to be the best.&lt;/p&gt;
&lt;p&gt;As programmers, what if we all decided to make as our goal code so bug free that no one could find problems with the code we wrote?  Maybe there is some part of the language you program in, or the framework that you use, that you’ve never tried.  How about learning it?  Is there a tool you could start using that would help you program better?  Maybe you’ve exhausted everything there is to learn about the language or framework that you use.  Maybe it is time to learn some other language.&lt;/p&gt;
&lt;p&gt;Who do you want to be? What do you want to be known for? These are interesting questions because they cause us to focus.  Do you want to be known as mediocre?  Keep coasting.  Do you want to be the person who gets the challenging problems because you are the only person who is reliable enough to give the project to? The problem with out-running your peers is that eventually, the bear will be the only thing behind you.  Where will you be?&lt;/p&gt;
&lt;h2 id=&#34;Action-Steps&#34;&gt;&lt;a href=&#34;#Action-Steps&#34; class=&#34;headerlink&#34; title=&#34;Action Steps&#34;&gt;&lt;/a&gt;Action Steps&lt;/h2&gt;&lt;p&gt;OK, fine.  How do we get from mediocre to awesome?&lt;/p&gt;
&lt;h3 id=&#34;1-Decide-to-Master-a-Skill&#34;&gt;&lt;a href=&#34;#1-Decide-to-Master-a-Skill&#34; class=&#34;headerlink&#34; title=&#34;1. Decide to Master a Skill&#34;&gt;&lt;/a&gt;1. Decide to Master a Skill&lt;/h3&gt;&lt;p&gt;I don’t care who you are or how good you are, there is still something you don’t know.  The great thing about being a programmer is that there is always something to master.  Do some sort of self-evaluation on your skills and determine to master some skill.&lt;/p&gt;
&lt;p&gt;Just by way of example, here are some possible skills you might learn.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Test Driven Development&lt;/li&gt;
&lt;li&gt;Deep Dive a Language you “Know”&lt;/li&gt;
&lt;li&gt;Learn a Language You Don’t Know&lt;/li&gt;
&lt;li&gt;Design Patterns&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-Teach&#34;&gt;&lt;a href=&#34;#2-Teach&#34; class=&#34;headerlink&#34; title=&#34;2. Teach&#34;&gt;&lt;/a&gt;2. Teach&lt;/h3&gt;&lt;p&gt;The best way to learn a topic is to teach the topic.  There are at least two reasons for this.  First, preparing to teach makes you organize all of those scattered bits of information in your brain in a way that someone else can grasp.  Second, it will raise questions you didn’t even know you should ask.  I can’t tell you how many times I’ve explained something and the person I am teaching ask a question I’ve never considered before.  If you don’t know the answer, find the answer.  You obviously don’t know your subject as well as you think you do.&lt;/p&gt;
&lt;p&gt;Here are some possible ways to teach.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Host a “Lunch and Learn”&lt;/li&gt;
&lt;li&gt;Start a Blog&lt;/li&gt;
&lt;li&gt;Write a Book&lt;/li&gt;
&lt;li&gt;Mentor a Younger Programmer&lt;/li&gt;
&lt;li&gt;Present Something at a Users Group or Meet-up.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-Track-Progress&#34;&gt;&lt;a href=&#34;#3-Track-Progress&#34; class=&#34;headerlink&#34; title=&#34;3. Track Progress&#34;&gt;&lt;/a&gt;3. Track Progress&lt;/h3&gt;&lt;p&gt;In the business world, they say, “what you measure, grows.”  So, measure:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Decrease in bugs reported.&lt;/li&gt;
&lt;li&gt;Elapse time from start of project to bug free code.&lt;/li&gt;
&lt;li&gt;Cyclomatic complexity of your methods.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4-Interview-for-a-New-Job&#34;&gt;&lt;a href=&#34;#4-Interview-for-a-New-Job&#34; class=&#34;headerlink&#34; title=&#34;4. Interview for a New Job&#34;&gt;&lt;/a&gt;4. Interview for a New Job&lt;/h3&gt;&lt;p&gt;One of the things I’ve found that interviewing for new gigs does for me is that it reveals things I should know.  I find out quickly what I should know that I don’t.  And don’t be the guy who says, “If my 30 years of experience isn’t good enough for you, I don’t want your stinking job.”  Answer the questions, not matter how much experience you have.  You might just learn something.  If you don’t know the answer, after the interview, go find the answer.  Don’t be like, “why should I keep that in my brain?”  I mean, that might be true, but go find the answer too.&lt;/p&gt;
&lt;p&gt;I had one of those interviews.  I wrote a whole post about it that I deleted.  They had me doing something I was unable to do and that I felt the rest of my knowledge and skills more than compensated for.  But, after the interview, I went and found out how to do what they had asked.&lt;/p&gt;
&lt;h3 id=&#34;5-Change-Jobs&#34;&gt;&lt;a href=&#34;#5-Change-Jobs&#34; class=&#34;headerlink&#34; title=&#34;5. Change Jobs&#34;&gt;&lt;/a&gt;5. Change Jobs&lt;/h3&gt;&lt;p&gt;This probably sounds like odd advice, but as a contract programmer, I’ve been on assignments that have lasted as long as 8 years and I’ve been on assignments that were as short as 4 months.  What I’ve learned is that the longer I stay on an assignment, the staler my skills become.  That 8-year gig nearly made me unmarketable.  Why?  Because I never had to learn something new.  The only reason I am still marketable is because I started learning newer stuff toward then end of that gig.  When the gig was changing every 2 years or so, I was a lot more capable of moving into a new position.  Now, I’m learning all the time.  Learning what I think will make me more marketable as well as what I would really like to be doing next.  Some of that makes its way into what I’m doing today.  Some of it will have to wait.  But it is all experience and it is all valuable.  The point is, don’t get stuck knowing what you know.  Switching jobs is the fast way to achieve that.&lt;/p&gt;
&lt;h3 id=&#34;6-Ask-for-a-Code-Review&#34;&gt;&lt;a href=&#34;#6-Ask-for-a-Code-Review&#34; class=&#34;headerlink&#34; title=&#34;6. Ask for a Code Review&#34;&gt;&lt;/a&gt;6. Ask for a Code Review&lt;/h3&gt;&lt;p&gt;To be clear, what you are asking for is a review of your code, not how pretty it is.  Although, depending on how much experience you have, there may be some benefit in having your code reviewed for formatting as well as clarity.&lt;/p&gt;
&lt;p&gt;What I would hope you would get out of this exercise is several, “Have you considered doing it this way…” kind of comments.  If you can’t get someone to review your code, there are some great code cop kind of tools available for every language that you can have review your code for common mistakes.  But even better if you can get another human to look at your code.&lt;/p&gt;
&lt;p&gt;It is interesting, I’ve been coding for 28 years and I’ve lost track of how many companies I’ve worked for.  There was only one company that I’ve ever worked for that did code reviews.&lt;/p&gt;
&lt;h3 id=&#34;7-Change-Your-Body-Language&#34;&gt;&lt;a href=&#34;#7-Change-Your-Body-Language&#34; class=&#34;headerlink&#34; title=&#34;7. Change Your Body Language&#34;&gt;&lt;/a&gt;7. Change Your Body Language&lt;/h3&gt;&lt;p&gt;This probably seems like really odd advice so let me explain.  Or maybe you’ve already seen the &lt;a href=&#34;//www.ted.com/speakers/amy_cuddy&#34;&gt;Ted talk&lt;/a&gt; by Amy Cuddy that says the research shows that if you assume a body position that says, “I’m awesome” you are more likely to feel awesome.  But you may wonder what feeling awesome has to do with BEING awesome.&lt;/p&gt;
&lt;p&gt;Well, in my experience, you end up being who you believe yourself to be.  One way of hacking yourself into being awesome is to convince yourself that you are.  The best way to do that is to assume body positions that communicate that you are.&lt;/p&gt;
&lt;p&gt;Don’t think this is possible?  I grew up walking toe out.  At some point in High School or College, I read that it was more efficient to walk with my feet parallel to each other.  I started concentrating on changing how I walk.  Now I no longer think about it.  I haven’t thought about it for years.&lt;/p&gt;
&lt;p&gt;I’ve done the same thing with my body position.  Not as hard a modification, but I’ve noticed that it DOES work.&lt;/p&gt;
&lt;h3 id=&#34;8-Don’t-Brag&#34;&gt;&lt;a href=&#34;#8-Don’t-Brag&#34; class=&#34;headerlink&#34; title=&#34;8. Don’t Brag&#34;&gt;&lt;/a&gt;8. Don’t Brag&lt;/h3&gt;&lt;p&gt;The other thing that changing your body language will do is that it will communicate that you are confident and you’ll never have to say a word.  I believe I’m pretty good at what I do, but my general practice is to let what I know be discovered.  As I’ve observed my peers, I’ve found that the more they proclaim how great they are, the less confident they are that they really are, and generally, they aren’t.  You don’t want to be that person.  You want to portray confidence to be confident, but you want to be discovered.  “Even a fool, when he is silent, is considered wise.” and “Better to be silent and be thought a fool than to open your mouth and remove all doubt.”&lt;/p&gt;
&lt;h3 id=&#34;9-Focus-On-One-Thing&#34;&gt;&lt;a href=&#34;#9-Focus-On-One-Thing&#34; class=&#34;headerlink&#34; title=&#34;9. Focus On One Thing&#34;&gt;&lt;/a&gt;9. Focus On One Thing&lt;/h3&gt;&lt;p&gt;The temptation, if you are motivated at all, is to try to improve in every area all at once.  That is a recipe for disaster.  Focus on one thing.  I didn’t change how I walked and how I talked and how I ran and how I sat and… you get the picture.  I focused on how I walked.  Sometime later I focused on how I sat.  I learned how to code well and then how to do Test Driven Development.  I’m often asked how I learned all I know.  It is easy, I learned one thing at a time.&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">http://davembush.github.com/why-is-it-called-%E2%80%9Cinversion-of-control%E2%80%9D/</guid>
            <title>Why Is It Called “Inversion of Control”?</title>
            <link>http://davembush.github.com/why-is-it-called-%E2%80%9Cinversion-of-control%E2%80%9D/</link>
            <category>design patterns</category>
            <category>inversion of control</category>
            <category>ioc</category>
            <pubDate>Thu, 11 Jun 2015 06:00:00 -0400</pubDate>
            <description><![CDATA[ &lt;p&gt;&lt;img src=&#34;/uploads/2015/05/CHIL0007.png&#34; alt=&#34;CHIL0007&#34; title=&#34;CHIL0007&#34;&gt;&lt;/p&gt;
&lt;p&gt;There is a guy I’m working with who is trying to wrap his head around design principles.  He’s been watching a lot of &lt;a href=&#34;/pluralsight&#34;&gt;PluralSight videos&lt;/a&gt;.  As he was processing information about &lt;a href=&#34;/pluralsightIoC&#34;&gt;Inversion of Control&lt;/a&gt;, he asked the natural question I’ve never actually considered before.  “Why is it called Inversion of Control?  Normally, when you talk about ‘Inversion’ you are talking about reversing something or negating something.  That isn’t what we are doing here.”&lt;/p&gt;
&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;

&lt;h2 id=&#34;What-Is-Inversion-of-Control&#34;&gt;&lt;a href=&#34;#What-Is-Inversion-of-Control&#34; class=&#34;headerlink&#34; title=&#34;What Is Inversion of Control?&#34;&gt;&lt;/a&gt;What Is Inversion of Control?&lt;/h2&gt;&lt;p&gt;So, let’s start with a definition of what Inversion of Control is.  And let’s start the definition by explaining what it isn’t. In the old days, back when I started programming.  We had this thing called “Procedural Programming.” Control of your application flowed from beginning to end with looping to take care of any kind of waiting that needed to take place.  &lt;a href=&#34;//martinfowler.com/bliki/InversionOfControl.html&#34;&gt;Martin Fowler describes this&lt;/a&gt; using an illustration that is version similar to a basic “How to program in C#” console application that is in the beginning of most beginner programming books.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Let’s consider a simple example. Imagine I’m writing a program to get some information from a user and I’m using a command line enquiry. I might do it something like this&lt;/p&gt;
&lt;p&gt;  #ruby&lt;br&gt;  puts ‘What is your name?’&lt;br&gt;  name &amp;#x3D; gets&lt;br&gt;  process_name(name)&lt;br&gt;  puts ‘What is your quest?’&lt;br&gt;  quest &amp;#x3D; gets&lt;br&gt;  process_quest(quest)&lt;/p&gt;
&lt;p&gt;In this interaction, my code is in control: it decides when to ask questions, when to read responses, and when to process those results.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;What Inversion of Control does is that it puts something other than the main code in charge of doing critical parts of the program so that those other parts of the program can be swapped out by the person implementing the code.&lt;/p&gt;
&lt;h2 id=&#34;Examples-of-Inversion-of-Control&#34;&gt;&lt;a href=&#34;#Examples-of-Inversion-of-Control&#34; class=&#34;headerlink&#34; title=&#34;Examples of Inversion of Control&#34;&gt;&lt;/a&gt;Examples of Inversion of Control&lt;/h2&gt;&lt;p&gt;If you’ve ever written a WebForms or Windows Forms application, you’ve already experience inversion of control.&lt;/p&gt;
&lt;h3 id=&#34;OnPageLoad-or-OnFormLoad&#34;&gt;&lt;a href=&#34;#OnPageLoad-or-OnFormLoad&#34; class=&#34;headerlink&#34; title=&#34;OnPageLoad() or OnFormLoad()&#34;&gt;&lt;/a&gt;OnPageLoad() or OnFormLoad()&lt;/h3&gt;&lt;p&gt;You have probably never even given this much thought.  You think these two methods are where your code starts.  But the reality is, the code started long before these methods ever got called.  The thing that is in control is the .NET framework.  You’ve created a delegate that gets called by the framework so that your page or form does what you want it to.  Without this inversion of control, you would have to write a whole lot more code.&lt;/p&gt;
&lt;h3 id=&#34;Event-Handlers&#34;&gt;&lt;a href=&#34;#Event-Handlers&#34; class=&#34;headerlink&#34; title=&#34;Event Handlers&#34;&gt;&lt;/a&gt;Event Handlers&lt;/h3&gt;&lt;p&gt;While you might think of OnPageLoad and OnFormLoad as event handlers, the way they are implemented are more like virtual functions.  Event handlers, on the other hand, are a specific type of delegate that say, “When this thing happens, let me know about it.”  The code that fires the event doesn’t even really care what you do during the event.  Again, the control has been “Inverted” because there is a lot of code that is running that you have no control over and probably have no knowledge of.&lt;/p&gt;
&lt;h3 id=&#34;Virtual-Functions&#34;&gt;&lt;a href=&#34;#Virtual-Functions&#34; class=&#34;headerlink&#34; title=&#34;Virtual Functions&#34;&gt;&lt;/a&gt;Virtual Functions&lt;/h3&gt;&lt;p&gt;One of my favorite methods of inverting control is to use virtual functions.  I can have a parent class that controls the flow of the program that calls various virtual functions in order.  But my child class can provide the implementation of the functions to make them do various things.  I used this, at one time in the past, to create a framework for submitting links to various bookmarking sites.  They all worked essentially the same way, all I had to do was implement the specific details for each site while 80% of my code stayed the same in the base class.&lt;/p&gt;
&lt;h3 id=&#34;Delegates-or-Callback-Functions&#34;&gt;&lt;a href=&#34;#Delegates-or-Callback-Functions&#34; class=&#34;headerlink&#34; title=&#34;Delegates or Callback Functions&#34;&gt;&lt;/a&gt;Delegates or Callback Functions&lt;/h3&gt;&lt;p&gt;Another common way of implementing inversion is by using delegates or callbacks.  This work in a similar way to virtual functions expect that the functions are typically passed in to a method.  Much of the current implementation of JavaScript uses this method of inverting control as a primary pattern (but not limited to it as the only way.)&lt;/p&gt;
&lt;h3 id=&#34;Dependency-Injection&#34;&gt;&lt;a href=&#34;#Dependency-Injection&#34; class=&#34;headerlink&#34; title=&#34;Dependency Injection&#34;&gt;&lt;/a&gt;Dependency Injection&lt;/h3&gt;&lt;p&gt;I’ve &lt;a href=&#34;/dependency-injection-not-di/&#34;&gt;talked about Dependency Injection before&lt;/a&gt;.  Again, it is another way of delegating control to something other than the code that has main control.  What I want to make special note of here, though, is that Inversion of Control is not Dependency Injection but Dependency Injection is a form of Inversion of Control.  I think this is where most of the confusion about Inversion of Control comes from.  Most of the literature that talks about Inversion of Control talks about it at the same time they are talking about Dependency Injection.  As though the two concepts were the same.&lt;/p&gt;
&lt;h2 id=&#34;Why-Inversion-of-Control-Matters&#34;&gt;&lt;a href=&#34;#Why-Inversion-of-Control-Matters&#34; class=&#34;headerlink&#34; title=&#34;Why Inversion of Control Matters&#34;&gt;&lt;/a&gt;Why Inversion of Control Matters&lt;/h2&gt;&lt;p&gt;Finally, I want to talk for a bit about why Inversion of Control matters.  Because, for me, it is a lot more important that we understand what we are trying to achieve than it is that we’ve given it the right name or that we even know what name to call it.  All of the examples I’ve provided are things you’ve probably done in your code.  Some of them you’ve done without even knowing you were doing them.  But think about the alternative of not doing them. First, your code would be a lot harder to maintain.  Just think of how hard it would be to write a web site and maintain it if you had to write code that handled all of the work that happens for you behind the scenes. Second, it makes the code more loosely coupled.  And by doing that, it makes the code testable AND it makes the code more flexible and easy to change in the future. Maybe instead of calling it Inversion of Control it should have been called Delegation of Control.  Either way, the concept is to remove as much code as possible from our main controlling code and give the implementation responsibility to something else that can be swapped in without having to change the main loop.&lt;/p&gt;
 ]]></description>
        </item>
    </channel>
</rss>
